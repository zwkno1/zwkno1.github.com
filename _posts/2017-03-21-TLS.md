---
title: "TLS/SSL简介"
tags: [TLS, SSL, 安全, 加密, 密码] 
---

*传输层安全协议*（英语：Transport Layer Security，缩写：TLS），及其前身安全套接层（Secure Sockets Layer，缩写：SSL）是一种安全协议，目的是为互联网通信，提供安全及数据完整性保障。网景公司（Netscape）在1994年推出首版网页浏览器，网景导航者时，推出HTTPS协议，以SSL进行加密，这是SSL的起源。IETF将SSL进行标准化，1999年公布第一版TLS标准文件。随后又公布RFC 5246 （2008年8月）与 RFC 6176 （2011年3月）。在浏览器、电子邮件、即时通信、VoIP、网络传真等应用程序中，广泛支持这个协议。主要的网站，如Google、Facebook等也以这个协议来创建安全连接，发送数据。目前已成为互联网上保密通讯的工业标准。

## 发展历史

#### SSL 1.0、2.0和3.0

* 1.0版本从未公开过，因为存在严重的安全漏洞。
* 2.0版本在1995年2月发布，但因为存在数个严重的安全漏洞而被3.0版本替代。
* 3.0版本在1996年发布，是由网景工程师Paul Kocher、Phil Karlton和Alan Freier完全重新设计的。较新版本的SSL/TLS基于SSL 3.0。SSL 3.0作为历史文献IETF通过 RFC 6101 发表。

#### TLS 1.0

IETF将SSL标准化，即 RFC 2246 ，并将其称为TLS（Transport Layer Security）。从技术上讲，TLS 1.0与SSL 3.0的差异非常微小。TLS 1.0包括可以降级到SSL 3.0的实现，这削弱了连接的安全性。

#### TLS 1.1

TLS 1.1在 RFC 4346 中定义，于2006年4月发表[9]，它是TLS 1.0的更新。

#### TLS 1.2

TLS 1.2在 RFC 5246 中定义，于2008年8月发表。它基于更早的TLS 1.1规范。

#### TLS 1.3 （草案）

截至2016年1月，TLS 1.3还是一个互联网草案，细节尚属临时并且不完整。它基于更早的TLS 1.2规范。

## 过程

### SSL

下简要介绍SSL协议的工作方式。客户端要收发几个握手信号：
1. 发送一个“ClientHello”消息，内容包括：支持的协议版本，比如TLS1.0版，一个客户端生成的随机数（稍后用于生成“会话密钥”），支持的加密算法（如RSA公钥加密）和支持的压缩算法。
2. 然后收到一个“ServerHello”消息，内容包括：确认使用的加密通信协议版本，比如TLS 1.0版本（如果浏览器与服务器支持的版本不一致，服务器关闭加密通信），一个服务器生成的随机数（稍后用于生成“对话密钥”），确认使用的加密方法（如RSA公钥加密），服务器证书。
3. 当双方知道了连接参数，客户端与服务器交换证书（依靠被选择的公钥系统）。这些证书通常基于X.509，不过已有草案支持以OpenPGP为基础的证书。
4. 服务器请求客户端公钥。客户端有证书即双向身份认证，没证书时随机生成公钥。
5. 客户端与服务器通过公钥保密协商共同的主私钥（双方随机协商），这通过精心谨慎设计的伪随机数功能实现。结果可能使用Diffie-Hellman交换，或简化的公钥加密，双方各自用私钥解密。所有其他关键数据的加密均使用这个“主密钥”。数据传输中记录层（Record layer）用于封装更高层的HTTP等协议。记录层数据可以被随意压缩、加密，与消息验证码压缩在一起。每个记录层包都有一个Content-Type段用以记录更上层用的协议。

### TLS

TLS利用密钥算法在互联网上提供端点身份认证与通讯保密，其基础是公钥基础设施。不过在实现的典型例子中，只有网络服务者被可靠身份验证，而其客户端则不一定。这是因为公钥基础设施普遍商业运营，电子签名证书通常需要付费购买。协议的设计在某种程度上能够使主从架构应用程序通讯本身预防窃听、干扰和消息伪造。
	TLS包含三个基本阶段：
1. 对等协商支持的密钥算法
2. 基于非对称密钥的信息传输加密和身份认证、基于PKI证书的身份认证
3. 基于对称密钥的数据传输保密

在第一阶段，客户端与服务器协商所用密码算法。当前广泛实现的算法选择如下：
* 公钥私钥非对称密钥保密系统：RSA、Diffie-Hellman、DSA;
* 对称密钥保密系统：RC2、RC4、IDEA、DES、Triple DES、AES以及Camellia；
* 单向散列函数：MD5、SHA1以及SHA256。

TLS/SSL有多样的安全保护措施：
* 所有的记录层数据均被编号，用于消息验证码校验。

## 参考文献

[维基百科: 传输层安全协议][1]

[wikipedia: Transport Layer Security][2]

[1]: https://zh.wikipedia.org/zh-cn/传输层安全协议
[2]: https://en.wikipedia.org/wiki/Transport_Layer_Security
